# Rest 参数与 Sread 语法

- 支持传入任意数量参数的函数
- 将数组作为参数传递给函数

## Rest 参数 ...

- 默认情况下可以给函数传递任意数量的参数（多余的参数会被忽略）

```javascript
function sum(a, b) {
  return a + b;
}
alert(sum(1, 2, 3, 4, 5)); //3
```

- 解决：声明一个数组来收集多余的参数（Rest 参数）

```javascript
//所有参数都放进Rest参数
function sumAll(...args) {
  let sum = 0;
  for (let arg of args) {
    sum += arg;
  }
  return sum;
}
alert(sumAll(1)); //1
alert(sumAll(1, 2)); //3
alert(sumAll(1, 2, 3)); //6
//将多有的参数放进Rest参数
function showName(firstName, lastName, ...titles) {
  alert(firstName + " " + lastName); //Julius Caesar
  alert(titles[0]); //Consul
  alert(titles[1]); //Imperator
  alert(titles.length); //2
}
showName("Julius", "Caesar", "Consul", "Imperator");
```

- Rest 参数必须放到参数列表的末尾

```javascript
//Error
function f(arg1,...rest,arg2){...}
```

## arguments 变量

- 函数内部的类数组对象，存放函数的所有参数（在参数列表中索引作为键）
- 是可迭代的（可以用 for...of 遍历）
- 箭头函数没有 arguments（能访问到的是外部普通函数的 arguments 参数）

```javascript
function showName() {
  alert(arguments.length);
  alert(arguments[0]);
  alert(argumengs[1]);

  //可以遍历参数
  for (let arg of arguments) {
    alert(arg);
  }
}
showName("Julius", "Caesar"); //2 Julius Caesar
showName("Ilya"); //1 Ilya undefined

function f() {
  let showArg = () => alert(arguments[0]);
  showArg();
}
f(1); //1
```

## Spread 语法

- 将可迭代对象展开到参数列表中
- 可以合并数组

```javascript
let arr = [3, 5, 1];
alert(Math.max(...arr)); //5

//传入多个可迭代对象
let arr1 = [1, -2, 3, 4];
let arr2 = [8, 3, -8, 1];
alert(Math.max(...arr1, ...arr2)); //8

//和常规参数混合使用
alert(Math.max(1, ...arr1, 2, ...arr2, 25)); //25

//合并数组
let merged = [0, ...arr1, 2, ...arr2]; //0,1,-2,3,4,2,8,3,-8,1

//转换字符串
let str = "Hello";
alert([...str]); //H,e,l,l,o
```

## Spread 语法复制 array/object

...

# 变量作用域

## 代码块`{...}`

- 代码块内声明的变量只在该代码块内可见
- if,for 和 while 都有自己的代码块{...}

```javascript
{
  let message = "Hello";
  alert(message);
}
alert(message); //Error:message is not defined
```

## 嵌套函数

```javascript
function sayHiBye(firstName, lastName) {
  function getFullName() {
    return firstName + " " + lastName; //可以访问外部变量
  }
  alert("Hello, " + getFullName());
  alert("Bye, " + getFullName());
}

function makeCounter() {
  let count = 0;
  return function () {
    return count++;
  };
}

let counter = makeCounter();
alert(counter()); //0
alert(count()); //1
alert(count()); //2
```

## 词法环境对象

- 函数，代码块以及整个脚本，都有一个"词法环境"内部（隐藏）关联对象
  - 环境记录：存储所有局部变量作为其属性（获取或修改变量 —> 获取或修改词法环境的属性）
  - 外部引用：对外部词法环境的引用
- 函数有自己的内部词法环境
  - 当代码要访问一个变量时，首先搜索内部词法环境，然后搜索外部环境，然后搜索更外部的环境，直到全局词法环境
