# 日期和时间（Date）

## 创建

- new Date()：用当前时区的日期和时间创建
- new Date(milliseconds)：用时间戳整数（自 1970-01-01 00:00:00 UTC+0 经过的毫秒数）创建（正负皆可）
- new Date(datestring)：用日期时间格式字符串创建（使用当前时区）
- new Date(year,month,date,hours,minutes,seconds,ms)：通过当前时区日期组件创建
  - 只有 year 和 month 必须
  - year 应为 4 位数，2 位数视为 19XX
  - month 取值 0-11，代表 1 月-12 月
  - date 默认值 1
  - hours/minutes/seconds/ms 默认值 0

```javascript
let now = new Date(); //当前日期和时间
let Jan01_1970 = new Date(0); //1970年1月1日
let Jan02_1970 = new Date(24 * 3600 * 1000); //1970年1月2日
let Dec31_1969 = new Date(-24 * 3600 * 1000); //1969年12月31日
let date = new Date("2017-01-26"); //字符串格式创建
let date = new Date(2017, 0); //2017年1月1日 00:00:00
let date = new Date(2017, 0, 1); //2017年1月1日 00:00:00
let date = new Date(2017, 0, 1, 2, 3, 4, 567); //2017年1月1日02:03:04.567
```

## 访问日期组件

- 基于当地时区

  - getFullYear()：获取 4 位数年份
  - getMonth()：获取月份：0-11
  - getDate()：获取日期：1-31
  - getHours()/getMinutes()/getSeconds()/getMilliseconds()：获取时/分/秒/毫秒
  - getDay()：获取一周的第几天，0-6（星期日-星期六）
  - 以上方法都有 UTC 变体：getUTCxxx()
  - getTime()：返回日期时间戳（从 1970-1-1 00:00:00 UTC+0 开始到现在经过的毫秒数)
  - getTimezoneOffset()：返回 UTC 与本地时区的时差，以分钟为单位

```javascript
let date = new Date(); //当地时区的此刻时间
alert(date.getHours()); //当地时区的小时数
alert(date.getUTCHours()); //UTC+0时区的小时数

alert(new Date().getTimezoneOffset()); //返回 UTC 与本地时区的时差，以分钟为单位
```

## 设置日期组件

- setFullYear(year,[month],[date])
- setMonth(month,[date])
- setDate(date)
- setHours(hour,[min],[sec],[ms])
- setMinutes(min,[sec],[ms])
- setSeconds(sec,[ms])
- setMilliseconds(ms)
- 以上方法都有 UTC 变体：setUTCxxx(...)
- setTime(milliseconds)：使用自 1970-01-01 00:00:00 UTC+0 以来的毫秒数来设置整个日期

```javascript
let today = new Date();
today.setHours(0);
alert(today); //日期不变，小时数改为0
today.setHours(0, 0, 0, 0);
alert(today); //日期不变，时间为00:00:00
```

## 自动校准

- 设置超范围的数值，会自动校准

```javascript
let date = new Date(2013, 0, 32);
alert(date); //2013年2月1日

//获取指定时间段后的日期
let date = new Date(2016, 1, 28);
date.setDate(date.getDate() + 2); //加上2天
alert(date); //2016年3月1日，正确处理闰年
```
